\section{Motivation}



\section{Slow Storage}



\begin{figure}[!t]
    \centering
    \resizebox{\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={group size=4 by 2,
                            /pgf/bar width=2.7pt},
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-1, 0.425, 1.7125, 3.1},
                    xticklabels={2PL/OCC, STO, MVTO, TicToc},
                    ymajorgrids=true,
                    enlarge x limits = 0.2,
                    legend columns=-1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1] high
                \nextgroupplot[title={Read-intensive},YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 10.364933)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 14.441267)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 14.425833) (1.7125, 13.695567) (3, 16.9643)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 12.791433) (1.7125, 0.05428) (3, 12.298733)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 9.92869) (1.7125, 9.340693) (3, 11.959133)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 14.190467) (1.7125, 13.124533) (3, 16.308867)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 14.404033) (1.7125, 13.169733) (3, 17.120333)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [1,3] high
                \nextgroupplot[title={Write-intensive}, YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 5.088527)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 13.9281)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 7.07645) (1.7125, 5.59584) (3, 39.2637)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 4.271767) (1.7125, 0.05016) (3, 5.239043)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 3.879563) (1.7125, 3.21073) (3, 4.171167)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 7.14758) (1.7125, 5.09302) (3, 28.504433)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 7.34722) (1.7125, 5.753657) (3, 35.0623)};

                % graph [1,1] medium
                \nextgroupplot[title={Read-intensive},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 5.74492)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 5.701743)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 5.749967) (1.7125, 5.49676) (3, 5.710213)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 5.171957) (1.7125, 0.046666) (3, 4.639907)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 4.499663) (1.7125, 4.262087) (3, 4.50323)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 5.717253) (1.7125, 5.33784) (3, 5.73195)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 5.67032) (1.7125, 5.405587) (3, 5.707593)};


                % graph [1,3] medium
                \nextgroupplot[title={Write-intensive},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 9.648553)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 9.156227)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 9.86155) (1.7125, 8.966833) (3, 9.90628)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 4.785737) (1.7125, 0.044312) (3, 4.43323)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 4.431213) (1.7125, 3.680533) (3, 4.480477)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 9.65755) (1.7125, 6.98781) (3, 9.650477)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 9.859053) (1.7125, 6.96129) (3, 9.68747)};
                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

                % graph [1,2] read intensive
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.304596)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.415079)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.310117) (1.7125, 0.294705) (3, 0.13013)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.309437) (1.7125, 0.285392) (3, 0.134926)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.332255) (1.7125, 4.262087) (3, 0.130042)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.311321) (1.7125, 0.302894) (3, 0.157114)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.308572) (1.7125, 0.304875) (3, 0.134233)};

                % graph [1,4] write intensive
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.571121)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.495017)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.520538) (1.7125, 0.54321) (3, 0.280598)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.528094) (1.7125, 0.533668) (3, 0.272687)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.523497) (1.7125, 0.551743) (3, 0.266006)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.51712) (1.7125, 0.551956) (3, 0.316003)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.511699) (1.7125, 0.540079) (3, 0.289621)};

                % graph [1,2]
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.000554)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.000204)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.000093) (1.7125, 0.000098) (3, 0.000032)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.000085) (1.7125, 0.000089) (3, 0.000037)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.000089) (1.7125, 0.000077) (3, 0.000033)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.479464) (1.7125, 0.483513) (3, 0.000094)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.001726) (1.7125, 0.000607) (3, 0.000087)};

                % graph [1,4]
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.004177)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.000907)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.000498) (1.7125, 0.000473) (3, 0.000191)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.000566) (1.7125, 0.000276) (3, 0.000297)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.000493) (1.7125, 0.000509) (3, 0.000351)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.553703) (1.7125, 0.566425) (3, 0.000453)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.077443) (1.7125, 0.01577) (3, 0.000418)};

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);
            \coordinate (cc1) at ($(top)!.25!(bot)$);
            \coordinate (cc2) at ($(top)!.75!(bot)$);

            \node[above] at (c |- current bounding box.north) {\ref{grouplegend}};
            \node[below] at (cc1 |- current bounding box.south) {(a) High-contended YCSB (zipf=0.99)};
            \node[above] at (cc2 |- current bounding box.south) {(b) Medium-contended YCSB (zipf=0.6)};
        \end{tikzpicture}
    }
    \caption[YCSB small-transaction workloads results on slow SSD]{YCSB small-transaction workloads results with 120 processing threads on slow SSD. In write-intensive workloads, each transaction performs 8 reads and 8 writes. In read-intensive workloads, each transaction performs 15 reads and 1 write. Note that, in the medium-contended workload, several schemes have abort rates very close to 0.}
    \label{fig:ycsb:slow_ssd}
\end{figure}




\begin{figure}[!t]
    \centering
    \resizebox{\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={group size=4 by 1,
                            /pgf/bar width=2.7pt},
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-1, 0.425, 1.7125, 3.1},
                    xticklabels={2PL/OCC, STO, MVTO, TicToc},
                    ymajorgrids=true,
                    enlarge x limits = 0.225,
                    legend columns=-1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1] high
                \nextgroupplot[YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}, ylabel style={yshift=-5pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 17.7908)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 13.9216)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 21.6929) (1.7125, 19.823333) (3, 22.264467)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 16.7041) (1.7125, 0.071738) (3, 13.9898)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 13.890367) (1.7125, 11.8303) (3, 13.760167)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 18.941667) (1.7125, 15.2963) (3, 22.4423)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 21.315967) (1.7125, 17.8994) (3, 22.084967)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [2,1] abort rate
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}, ylabel style={yshift=-3pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.162546)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.281549)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.123194) (1.7125, 0.050042) (3, 0.058888)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.1363) (1.7125, 0.052943) (3, 0.057104)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.139533) (1.7125, 0.052058) (3, 0.05523)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.170173) (1.7125, 0.125589) (3, 0.078445)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.13226) (1.7125, 0.108899) (3, 0.06144)};

                % graph [3,1] medium
                \nextgroupplot[YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}, ylabel style={yshift=-8pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 11.919633)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 11.989233)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 11.891433) (1.7125, 11.464433) (3, 11.743967)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 9.385673) (1.7125, 0.082369) (3, 8.519537)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 8.327213) (1.7125, 7.538987) (3, 8.14708)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 11.3492) (1.7125, 9.616147) (3, 11.706867)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 11.7846) (1.7125, 10.483733) (3, 11.955533)};

                % graph [4,1] medium abort rate
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}, ylabel style={yshift=-3pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.000607)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.000509)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.00026) (1.7125, 0.000032) (3, 0.000075)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.000203) (1.7125, 0.000052) (3, 0.000076)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.000178) (1.7125, 0.000175) (3, 0.000064)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.227664) (1.7125, 0.180463) (3, 0.000257)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.128828) (1.7125, 0.078013) (3, 0.000214)};
                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);
            \coordinate (cc1) at ($(top)!.25!(bot)$);
            \coordinate (cc2) at ($(top)!.75!(bot)$);

            \node[above] at (c |- current bounding box.north) {\ref{grouplegend}};
            \node[below] at (cc1 |- current bounding box.south) {(a) High-contended (zipf=0.99)};
            \node[above] at (cc2 |- current bounding box.south) {(b) Medium-contended (zipf=0.6)};
        \end{tikzpicture}
    }
    \caption[YCSB mixed-transaction workloads results on slow SSD]{YCSB mixed-transaction workloads results with 120 processing threads on slow SSD. 80\% of transactions perform 2 reads and 2 writes, and 20\% of transactions perform 28 reads. Note that, in the medium-contended workload, several schemes have abort rates very close to 0.}
    \label{fig:ycsb:mixed}
\end{figure}




\begin{figure}[!t]
    \centering
    \resizebox{.75\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={
                            group size=2 by 1,
                            horizontal sep=1.5cm,
                            /pgf/bar width=2.7pt
                        },
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-1, 0.425, 1.7125, 3.1},
                    xticklabels={2PL/OCC, STO, MVTO, TicToc},
                    ymajorgrids=true,
                    enlarge x limits = 0.225,
                    legend columns=1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1] high
                \nextgroupplot[YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}, ylabel style={yshift=-5pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 1.132117)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 2.381903)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 4.298397) (1.7125, 2.3857) (3, 2.398567)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 2.726483) (1.7125, 0.010374) (3, 1.47637)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 2.55686) (1.7125, 1.613997) (3, 1.495053)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 4.369143) (1.7125, 2.26709) (3, 2.393783)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 4.84888) (1.7125, 1.949793) (3, 2.39416)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [1,2] abort rate
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}, ylabel style={yshift=-5pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.780498)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.338777)}; % double check
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.306208) (1.7125, 0.271251) (3, 0.250567)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.311134) (1.7125, 0.604878) (3, 0.24539)}; % double check mvcc
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.340524) (1.7125, 0.275897) (3, 0.249158)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.30175) (1.7125, 0.249261) (3, 0.25168)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.287686) (1.7125, 0.261718) (3, 0.268675)};
                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);

            \node[right=4cm] at (c |- current bounding box.east) {\ref{grouplegend}};
        \end{tikzpicture}
    }
    \caption[YCSB long-transaction workloads results on slow SSD]{YCSB long-transaction workloads results with 120 processing threads on slow SSD. 5\% of transactions perform 1000 reads and the rest of transactions perform 8 writes and 8 reads. The distribution is Zipfian with 0.9.}
    \label{fig:ycsb:long}
\end{figure}




\begin{figure*}[!t]
    \centering
    \resizebox{\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={group size=4 by 2,
                            /pgf/bar width=2.7pt},
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-0.8625, 0.425, 1.7125, 3},
                    xticklabels={2PL/OCC, STO, MVTO, TicToc},
                    xticklabel style={font=\tiny},
                    ymajorgrids=true,
                    enlarge x limits = 0.2,
                    legend columns=-1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1]
                \nextgroupplot[title={4 warehouses},YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 10.435867)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 6.705303)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 15.243133) (1.7125, 10.439267) (3, 16.118167)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 10.630633) (1.7125, 0.487886) (3, 12.915967)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 10.555533) (1.7125, 6.000767) (3, 10.588833)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 15.047167) (1.7125, 7.931357) (3, 14.545967)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 15.4038) (1.7125, 7.893797) (3, 15.6993)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [1,2]
                \nextgroupplot[title={8 warehouses}, YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 10.954033)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 4.538743)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 12.9659) (1.7125, 9.66877) (3, 13.214967)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 10.404567) (1.7125, 0.370496) (3, 11.023467)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 10.5734) (1.7125, 5.628667) (3, 10.133817)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 12.979) (1.7125, 6.524537) (3, 12.9708)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 13.353233) (1.7125, 6.707457) (3, 13.025)};

                % graph [1,3]
                \nextgroupplot[title={16 warehouses},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 9.963947)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 3.257557)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 9.537317) (1.7125, 7.649797) (3, 9.185967)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 7.545187) (1.7125, 0.205451) (3, 7.702217)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 8.662643) (1.7125, 4.814237) (3, 8.409643)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 10.459933) (1.7125, 5.09145) (3, 9.528323)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 9.873883) (1.7125, 4.969443) (3, 9.350587)};


                % graph [1,4] 32wh
                \nextgroupplot[title={32 warehouses},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 8.281773)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 3.368457)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 7.48262) (1.7125, 6.326153) (3, 7.225083)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 5.781087) (1.7125, 0.097421) (3, 6.190753)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 6.90269) (1.7125, 3.958337) (3, 6.694893)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 8.722823) (1.7125, 4.49392) (3, 7.51293)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 7.79229) (1.7125, 4.189127) (3, 7.45213)};

                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

                % graph [2,1] 4 wh
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.329391)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.586844)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.305108) (1.7125, 0.348413) (3, 0.351015)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.301385) (1.7125, 0.356276) (3, 0.364606)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.302807) (1.7125, 0.385476) (3, 0.366083)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.326195) (1.7125, 0.499632) (3, 0.372108)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.321034) (1.7125, 0.398993) (3, 0.370333)};

                % graph [2,2] 8 wh
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.267192)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.626045)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.254501) (1.7125, 0.278394) (3, 0.329011)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.260583) (1.7125, 0.289969) (3, 0.33647)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.263124) (1.7125, 0.306613) (3, 0.32157)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.335892) (1.7125, 0.519921) (3, 0.359967)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.298861) (1.7125, 0.32861) (3, 0.36367)};

                % graph [2,3] 16 wh
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.256053)}; % rerun with higher abort panelty
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.618218)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.205467) (1.7125, 0.207115) (3, 0.298383)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.197486) (1.7125, 0.324352) (3, 0.288648)}; % rerun mvcc
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.206902) (1.7125, 0.197685) (3, 0.279051)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.395279) (1.7125, 0.525739) (3, 0.361279)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.334312) (1.7125, 0.252467) (3, 0.356596)};

                % graph [2,4] 32 wh
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.276659)};  % return
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.498413)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.065079) (1.7125, 0.05539) (3, 0.218316)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.05402) (1.7125, 0.2233) (3, 0.198286)}; % rerun mvcc
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.056568) (1.7125, 0.042959) (3, 0.193242)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.496261) (1.7125, 0.568785) (3, 0.302585)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.373169) (1.7125, 0.189238) (3, 0.300333)};

                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0) (1.7125, 0) (3, 0)};

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);

            \node[above] at (c |- current bounding box.north) {\ref{grouplegend}};
        \end{tikzpicture}
    }
    \caption[TPC-C results on slow SSD]{TPC-C results with 120 processing threads on slow SSD (More warehouses means less contention).}
    \label{fig:tpcc}
\end{figure*}






\section{Fast Storage}


\begin{figure}[!t]
    \centering
    \resizebox{\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={group size=4 by 2,
                            /pgf/bar width=2.7pt},
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-1, 0.425, 3.1},
                    xticklabels={2PL/OCC, STO, TicToc},
                    ymajorgrids=true,
                    enlarge x limits = 0.2,
                    legend columns=-1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1] high
                \nextgroupplot[title={Read-intensive},YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 40.608133)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 9.641523)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 100.589433) (3, 342.33)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 32.581733) (3, 53.617733)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 34.518667) (3, 60.1803)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 52.053633) (3, 105.591)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 78.006133) (3, 206.962)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [1,3] high
                \nextgroupplot[title={Write-intensive}, YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 13.4068)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 12.871567)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 20.868633) (3, 48.751833)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 11.414233) (3, 13.5591)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 10.320467) (3, 12.3741)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 17.8436) (3, 30.488667)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 19.657167) (3, 40.6375)};

                % graph [1,1] medium
                \nextgroupplot[title={Read-intensive},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 249.212)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 5.632817)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 304.898)(3, 305.503333)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 189.604) (3, 113.674333)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 71.498267) (3, 71.392467)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 149.862667) (3, 151.15)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 235.684667) (3, 235.993333)};


                % graph [1,3] medium
                \nextgroupplot[title={Write-intensive},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 266.868333)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 5.085443)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 293.822) (3, 293.970333)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 154.005) (3, 146.303)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 70.924433) (3, 71.719567)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 156.197) (3, 161.700667)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 255.064) (3, 255.141333)};
                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

                % graph [1,2] read intensive
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.300394)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.415827)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.314407) (3, 0.130448)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.300011) (3, 0.136726)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.296994) (3, 0.130361)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.386568) (3, 0.256559)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.330712) (3, 0.149822)};

                % graph [1,4] write intensive
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.573143)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.493239)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.517988) (3, 0.28678)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.516791) (3, 0.27266)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.535364) (3, 0.292757)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.538097) (3, 0.337119)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.517645) (3, 0.297033)};

                % graph [1,2]
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.00056)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.000167)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.000085) (3, 0.000031)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.000081) (3, 0.000045)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.000098) (3, 0.000032)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.001611) (3, 0.000105)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.000211) (3, 0.00008)};

                % graph [1,4]
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.002115)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.001008)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.000498) (3, 0.000191)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.000456) (3, 0.000237)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.000605) (3, 0.000398)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.007669) (3, 0.000779)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.003707) (3, 0.000566)};

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);
            \coordinate (cc1) at ($(top)!.25!(bot)$);
            \coordinate (cc2) at ($(top)!.75!(bot)$);

            \node[above] at (c |- current bounding box.north) {\ref{grouplegend}};
            \node[below] at (cc1 |- current bounding box.south) {(a) High-contended YCSB (zipf=0.99)};
            \node[above] at (cc2 |- current bounding box.south) {(b) Medium-contended YCSB (zipf=0.6)};
        \end{tikzpicture}
    }
    \caption[YCSB small-transaction workloads results on fast storage]{YCSB small-transaction workloads results with 120 processing threads on fast storage. In write-intensive workloads, each transaction performs 8 reads and 8 writes. In read-intensive workloads, each transaction performs 15 reads and 1 write. Note that, in the medium-contended workload, several schemes have abort rates very close to 0.}
    \label{fig:ycsb:slow_ssd}
\end{figure}




\begin{figure}[!t]
    \centering
    \resizebox{\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={group size=4 by 1,
                            /pgf/bar width=2.7pt},
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-1, 0.425, 3.1},
                    xticklabels={2PL/OCC, STO, TicToc},
                    ymajorgrids=true,
                    enlarge x limits = 0.225,
                    legend columns=-1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1] high
                \nextgroupplot[YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}, ylabel style={yshift=-5pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 124.313667)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 9.13111)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 180.33) (3, 311.536)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 92.825067) (3, 125.022333)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 64.094933) (3, 91.446867)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 71.368433) (3, 105.553667)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 140.384333) (3, 221.610333)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [2,1] abort rate
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}, ylabel style={yshift=-3pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.163619)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.263853)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.126144) (3, 0.058634)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.122566) (3, 0.057911)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.136498) (3, 0.059566)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.239943) (3, 0.117789)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.139826) (3, 0.065083)};

                % graph [3,1] medium
                \nextgroupplot[YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}, ylabel style={yshift=-8pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 506.71)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 7.140063)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 720.277667) (3, 714.753333)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 345.637667) (3, 267.104333)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 135.666333) (3, 134.658333)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 68.007267) (3, 284.942667)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 315.562667) (3, 475.911667)};

                % graph [4,1] medium abort rate
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}, ylabel style={yshift=-3pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.000344)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.000148)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.000432) (3, 0.000202)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.000239) (3, 0.000221)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.000194) (3, 0.000078)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.257643) (3, 0.00023)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.08147) (3, 0.000191)};
                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);
            \coordinate (cc1) at ($(top)!.25!(bot)$);
            \coordinate (cc2) at ($(top)!.75!(bot)$);

            \node[above] at (c |- current bounding box.north) {\ref{grouplegend}};
            \node[below] at (cc1 |- current bounding box.south) {(a) High-contended (zipf=0.99)};
            \node[above] at (cc2 |- current bounding box.south) {(b) Medium-contended (zipf=0.6)};
        \end{tikzpicture}
    }
    \caption[YCSB mixed-transaction workloads results on fast storage]{YCSB mixed-transaction workloads results with 120 processing threads on fast storage. 80\% of transactions perform 2 reads and 2 writes, and 20\% of transactions perform 28 reads. Note that, in the medium-contended workload, several schemes have abort rates very close to 0.}
    \label{fig:ycsb:mixed}
\end{figure}




\begin{figure}[!t]
    \centering
    \resizebox{.75\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={
                            group size=2 by 1,
                            horizontal sep=1.5cm,
                            /pgf/bar width=2.7pt
                        },
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-1, 0.425, 3.1},
                    xticklabels={2PL/OCC, STO, TicToc},
                    ymajorgrids=true,
                    enlarge x limits = 0.225,
                    legend columns=1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1] high
                \nextgroupplot[YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}, ylabel style={yshift=-5pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 4.0899)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.275767)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 14.4813) (3, 9.571037)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 13.3011) (3, 9.311203)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 12.304867) (3, 8.088823)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 13.978767) (3, 9.499523)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 14.869067) (3, 9.124267)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [1,2] abort rate
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}, ylabel style={yshift=-5pt}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.643159)}; % double check
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.829988)}; % double check
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.260036) (3, 0.24408)}; % double check
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.29484) (3, 0.248819)}; % double check sto
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.307315) (3, 0.256368)}; % double check sto
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.267667) (3, 0.246097)}; % double check
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.263106) (3, 0.247183)}; % double check
                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);

            \node[right=4cm] at (c |- current bounding box.east) {\ref{grouplegend}};
        \end{tikzpicture}
    }
    \caption[YCSB long-transaction workloads results on fast storage]{YCSB long-transaction workloads results with 120 processing threads on fast storage. 5\% of transactions perform 1000 reads and the rest of transactions perform 8 writes and 8 reads. The distribution is Zipfian with 0.9.}
    \label{fig:ycsb:long}
\end{figure}




\begin{figure*}[!t]
    \centering
    \resizebox{\textwidth}{!}{%
        \begin{tikzpicture}
            \begin{groupplot}[group style={group size=4 by 2,
                            /pgf/bar width=2.7pt},
                    height = 3.6cm,
                    width = 4.5cm,
                    ybar= 2*\pgflinewidth,
                    xtick={-0.8625, 0.425, 3},
                    xticklabels={2PL/OCC, STO, TicToc},
                    xticklabel style={font=\tiny},
                    ymajorgrids=true,
                    enlarge x limits = 0.2,
                    legend columns=-1,
                    legend entries={{\ssmall Memory (Idealized)}, {\ssmall Disk}, {\ssmall Disk-Cache}, {\ssmall \fsketchname},  {\ssmall \psketchname}},
                    area legend,
                    legend to name=grouplegend,
                ]

                % graph [1,1]
                \nextgroupplot[title={4 warehouses},YCSBThroughputBarChartPlot, ylabel={Goodput (KTPS)}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 25.981933)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 4.766923)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 59.3193) (3, 54.249267)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 23.122733) (3, 29.668767)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 17.227167) (3, 19.149033)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 41.3587) (3, 27.051667)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 56.8103) (3, 42.8906)};
                \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

                % graph [1,2]
                \nextgroupplot[title={8 warehouses}, YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 40.674833)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 2.690287)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 95.317467) (3, 85.340067)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 33.973233) (3, 41.828467)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 29.014767) (3, 25.245733)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 42.335667) (3, 30.594867)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 85.059467) (3, 58.450233)};

                % graph [1,3]
                \nextgroupplot[title={16 warehouses},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 60.0792)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 1.714923)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 126.781667) (3, 113.534667)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 49.8068) (3, 62.967367)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 33.078067) (3, 31.654267)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 37.753067) (3, 38.951133)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 111.767) (3, 78.6518)};


                % graph [1,4] 32wh
                \nextgroupplot[title={32 warehouses},YCSBThroughputBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 91.371733)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 1.768823)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 136.254) (3, 128.511333)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 60.4086) (3, 77.2502)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 35.204067) (3, 35.5132)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 54.0724) (3, 62.5415)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 124.853) (3, 103.150333)};

                \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

                % graph [2,1] 4 wh
                \nextgroupplot[AbortRateBarChartPlot, ylabel={Abort rate}]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.343923)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.582189)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.308396) (3, 0.358287)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.300735) (3, 0.362429)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.306576) (3, 0.373073)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.378139) (3, 0.439741)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.316455) (3, 0.38327)};

                % graph [2,2] 8 wh
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.26031)};
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.619373)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.259365) (3, 0.328457)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.249634) (3, 0.322022)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.259498) (3, 0.320605)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.383305) (3, 0.448231)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.279779) (3, 0.364156)};

                % graph [2,3] 16 wh
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.181629)}; % rerun with higher abort panelty
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.626907)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.194619) (3, 0.282973)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.189055) (3, 0.271532)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.180874) (3, 0.280659)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.572401) (3, 0.40728)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.23819) (3, 0.320579)};

                % graph [2,4] 32 wh
                \nextgroupplot[AbortRateBarChartPlot]
                \addplot[2PL-BarStyle, forget plot] coordinates {(-0.5, 0.133359)};  % return
                \addplot[KR-OCC-BarStyle, forget plot] coordinates {(-0.26, 0.512981)};
                \addplot[Memory-BarStyle] coordinates {(0.425, 0.040332) (3, 0.202382)};
                \addplot[Disk-BarStyle] coordinates {(0.425, 0.067348) (3, 0.215892)};
                \addplot[Disk-Cache-BarStyle] coordinates {(0.425, 0.063018) (3, 0.20933)};
                \addplot[Counter-Lazy-BarStyle] coordinates {(0.425, 0.74949) (3, 0.291205)};
                \addplot[FPSketch-BarStyle] coordinates {(0.425, 0.167312) (3, 0.247521)};
            \end{groupplot}
            \coordinate (c) at ($(top)!.5!(bot)$);

            \node[above] at (c |- current bounding box.north) {\ref{grouplegend}};
        \end{tikzpicture}
    }
    \caption[TPC-C results on fast storage]{TPC-C results with 120 processing threads on fast storage (More warehouses means less contention).}
    \label{fig:tpcc}
\end{figure*}



\section{Summary}